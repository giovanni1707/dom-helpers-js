<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DOM Helpers Demo ‚Äî get, getRequired, waitFor</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f7f7f7;
      padding: 20px;
    }
    .section {
      border: 2px solid #ddd;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
      background: white;
    }
    button {
      padding: 8px 15px;
      border-radius: 6px;
      border: none;
      background: #007bff;
      color: white;
      cursor: pointer;
    }
    #log {
      margin-top: 10px;
      background: #222;
      color: #0f0;
      padding: 10px;
      font-family: monospace;
      border-radius: 8px;
      height: 150px;
      overflow-y: auto;
    }
  </style>
</head>
<body>

  <h1>DOM Helpers Library Test</h1>

  <div class="section">
    <h2>1Ô∏è‚É£ Elements.get(id, fallback)</h2>
    <p id="existing">I already exist!</p>
    <button id="getBtn">Test Elements.get()</button>
  </div>

  <div class="section">
    <h2>2Ô∏è‚É£ Elements.getRequired(...ids)</h2>
    <p id="required1">Required element 1</p>
    <p id="required2">Required element 1</p>
    <button id="requiredBtn">Test Elements.getRequired()</button>
  </div>

  <div class="section">
    <h2>3Ô∏è‚É£ Elements.waitFor(...ids)</h2>
    <button id="createBtn">Create #delayed after 2 seconds</button>
  </div>

  <div id="log"></div>

  <!-- ‚úÖ Load your real DOM Helpers library -->
  <script src="../../src/dom-helpers.js"></script>

  <script>
    const logBox = document.getElementById('log');
    const log = msg => logBox.innerHTML += msg + '<br>';

    // 1Ô∏è‚É£ Elements.get()
    const getBtn = Elements.get('getBtn');
    getBtn.addEventListener('click', () => {
      const existing = Elements.get('existing');
      const notFound = Elements.get('missing', () => {
        const span = document.createElement('span');
        span.textContent = '(Fallback created dynamically)';
        span.style.color = 'red';
        document.body.appendChild(span);
        return span;
      });

      log(`‚úÖ existing.textContent = "${existing.textContent}"`);
      log(`üß© fallback element created -> ${notFound.textContent}`);
    });

    // 2Ô∏è‚É£ Elements.getRequired()
    const requiredBtn = Elements.get('requiredBtn');
    requiredBtn.addEventListener('click', () => {
      try {
        const { required1, required2 } = Elements.getRequired('required1', 'required2');
        log(`‚úÖ Got required elements: ${required1.id}, ${required2.id}`);
      } catch (err) {
        log(`‚ùå ${err.message}`);
      }
    });

    // 3Ô∏è‚É£ Elements.waitFor()
    const createBtn = Elements.get('createBtn');
    createBtn.addEventListener('click', async () => {
      log('üïí Creating element #delayed in 2 seconds...');
      setTimeout(() => {
        const div = document.createElement('div');
        div.id = 'delayed';
        div.textContent = 'I was created dynamically!';
        document.body.appendChild(div);
      }, 2000);

      const { delayed } = await Elements.waitFor('delayed');
      log(`‚úÖ Found dynamically created element: ${delayed.id}`);
      delayed.style.color = 'green';
    });
  </script>
</body>
</html>
